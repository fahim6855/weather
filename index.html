<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

<script src="https://kit.fontawesome.com/f733ee0919.js" crossorigin="anonymous"></script>

</head>
<body>
<div class="body-slimer">
    <h3 class="header">Weather Bro</h3>
    <div class="main-box">
    <div class="date-time">
        <p class="date"> 28 Sep, Sat</p>
        <p class="time">10:30:45</p>
    </div><hr>

    <div class="search-box">
        <input type="text" placeholder="Search For Your City">
        <button><i class="fa-solid fa-magnifying-glass"></i></button>
    </div>

    <div class="city-country">    
        <p class="city"></p>
        <p class="country"></p>
    </div>

    <div class="temp">
        <!-- <img src="images/therm.png" alt="img" class="therm-img"> -->
        <h1></h1>
    </div>

    <div class="weather-humadity">
        <div class="weather">
            <p class="weather-key"><i class="fa-solid fa-cloud"></i> Weather</p>
            <p class="weather-value">Sunny</p>
        </div>

        <div class="feels">
            <p class="feels-key"> <i class="fa-solid fa-temperature-three-quarters"></i> Feels Like</p>
            <p class="feels-value">35°</p>
        </div>
    </div>

    <div class="error">
        <h1><i class="fa-solid fa-face-sad-tear"></i></h1>
        <h3>Sorry! Invalid City Name</h3>
    </div>

    </div> <!--  //main-box -->


</div>
<script src="index.js"></script>



    <script>
        // Date Output here
let  dateOutput = document.querySelector(".date")
let dayList =["Sun", "Mon", "Tue", "Wed","Thu", "Fri", "Sat"]
var monthList = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul","Aug", "Sep", "Oct", "Nov", "Dec"];

function dateFunc(){
let date = new Date();
let day = date.getDate();
let month = monthList[date.getMonth()];
let weekDay = dayList[date.getDay()];


dateOutput.innerHTML = ` <i class="fa-regular fa-calendar-days"></i> ${day} ${month}, ${weekDay}`


setInterval(clock,1000);
}

dateFunc()

//Time Output here
let clockOutput = document.querySelector(".time");

function clock(){
let date = new Date();
let hour = date.getHours();
let minute = date.getMinutes();
let second = date.getSeconds();

//hour = timeF(hour)
minute = timeF(minute)
second = timeF(second)

clockOutput.innerHTML = '<i class="fa-regular fa-clock"></i> ' + hour+" : "+minute+ " : " + second


setInterval(clock,1000);
}


function timeF(value){
    if (value<10){
        value = "0"+value;
      }  
        return value
    }
    
clock()

//box Data here

let tempField = document.querySelector(".temp h1");
let cityField = document.querySelector(".city");
let countryField = document.querySelector(".country");
let searchField = document.querySelector("input");
let searchBtn = document.querySelector("button");
let weather = document.querySelector(".weather-value");
let feelsLike = document.querySelector(".feels-value");

//Api Calling

let apiKey = "&APPID=" +"fa45244ecec24c4b733abb9cb8e97665"

async function getData(city){

let apiUrl = `http://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric`;

    let response = await fetch(apiUrl+apiKey);

// Error Handle in if
if (response.status == 404){
    let errorDiv = document.querySelector(".error");
    errorDiv.style.display = "grid";
    tempField.style.display = "none";
    document.querySelector(".weather").style.display = "none";
    document.querySelector(".feels").style.display = "none";
    document.querySelector(".city-country").style.display = "none";
}

else{
    let data = await response.json();
    
    tempField.innerHTML =  Math.round(data.main.temp) + "°C";
    
    cityField.innerHTML = '<i class="fa-solid fa-location-dot"></i> ' + data.name;
    
    countryField.innerHTML = '<i class="fa-solid fa-flag"></i> ' + data.sys.country

    weather.innerHTML = data.weather[0].main

    feelsLike.innerHTML = Math.round(data.main.feels_like) + "°C";

    // error handle
    let errorDiv = document.querySelector(".error");
    errorDiv.style.display = "none";
    tempField.style.display = "grid";
    document.querySelector(".weather").style.display = "block";
    document.querySelector(".feels").style.display = "block";
    document.querySelector(".city-country").style.display = "flex";
}
   
}

getData('Dhaka')

searchBtn.addEventListener("click",function(){
    
    getData(searchField.value)
})
    </script>
</body>
</html>
